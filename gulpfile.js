/** * * gulp 打包压缩 * Created by msxiehui on 2018/01/17. * Date:2018/1/17 * Time:0:46 * Emali:msxiehui@163.com * * VERSION:1.0.0 * ListDate:2018-01-17 0:47 * * 增加 文件头 通过package 文件信息  banner 文件头模板进行设置 * * 北京耀启网络科技有限公司 * 北京百孚思传实互联网营销机构 *///构建工具var gulp = require('gulp');var fs=require("fs");//文件合并var concat = require('gulp-concat');// 文件重命名var rename = require('gulp-rename');//压缩合并JSvar uglify = require('gulp-uglify');//添加文件头var header = require('gulp-header');//加载 package.jsonvar pkg = JSON.parse(fs.readFileSync('package.json'));var banner= [    '/*!',    ' * <%= name %> -<%= homepage %>',    ' * Version - <%= version %> <%= internalversion %>',    ' * Licensed under the MIT license - http://opensource.org/licenses/MIT',    ' *',    ' * Copyright (c) <%= new Date().getFullYear() %> <%= author %>',    ' *',    ' *',    ' */\n\n'].join('\n')/** * 合并 js 压缩js   合并版 all.js 压缩版  all-xxx.min.js */gulp.task('default', function () {    console.log()    var c = gulp.src("msTools.js")        .pipe(rename({extname: "-"+pkg.version+'.js'}))        .pipe(gulp.dest('src/'))        .pipe(uglify())        .pipe(rename({extname:'.min.js'}))        .pipe(header(banner, pkg))        .pipe(gulp.dest('src/'))       return c;      });function log(name,str) {    var time=new Date().toTimeString();    time=time.slice(0,time.indexOf(" "));    console.log("["+time+"] --> ",name+":",str);}