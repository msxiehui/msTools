/*!
 * mstools -https://github.com/msxiehui/msTools#readme
 * Version - 1.0.4
 * Licensed under the MIT license - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 msxiehui@163.com
 *
 *
 */

!function(){var t=window.ms=window.$$=function(e,i){return new t.fn.init(e,i)};t.version="1.0.4",t.fn=t.prototype={init:function(t){return t&&(this.selector=t),this}},t.jQueryOrZepto=function(){return!(!window.jQuery&&!window.Zepto)||(console.error("此功能需要 jQuery或 Zepto 支持"),!1)},t.height=window.innerHeight,t.width=window.innerWidth,t.log=new function(){this.ready=!1,this.id="msLog",this.content="msCon",this.tool="msTool",this.pos=1;var t=this;this.init=function(e){null==e&&(e=$("body")),$("#msLog").length>0&&(this.id="ms_msLog"),$("#msCon").length>0&&(this.content="ms_msCon"),$("#msTool").length>0&&(this.tool="ms_msTool"),e.prepend('<div id="'+this.id+'" style="width: 50%;height: 30%;position: absolute;z-index: 999999; background: rgba(0,0,0,0.3);;"><div id="'+this.content+'" style="padding: 6px;height: 80%;width: 90%;overflow: auto;position: relative;"></div><div id="'+this.tool+'" style="position: absolute;width: 100%;z-index: 999; bottom: 0;text-align: center"><input type="button" value="切换位置" id="log_postion" style="z-index: 9999999;margin-right: 5px"><input type="button" value="清空" id="log_clear" style="z-index: 9999999;margin-right: 5px"><input type="button" value="关闭" id="log_close" style="z-index: 9999999;margin-right: 5px"> </div></div>'),this.ready=!0,this.position(),$("#log_postion").on("touchstart mousedown",function(e){e.stopPropagation(),t.pos<5?t.pos+=1:t.pos=1,t.position(t.pos)}),$("#log_clear").on("touchstart mousedown",function(e){e.stopPropagation(),t.clear()}),$("#log_close").on("touchstart mousedown",function(e){e.stopPropagation(),t.close()}),$("#"+this.content).on("touchstart",function(t){t.stopPropagation()}),$("#"+this.content).on("touchmove",function(t){t.stopPropagation()})},this.position=function(t){if(0!=this.ready){var e=$("#"+this.id);switch(t){case 2:e.css({left:"",right:"0px",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=2;break;case 3:e.css({left:"50%",right:"",top:"50%",bottom:"","margin-left":"-25%","margin-top":"-25%"}),this.pos=3;break;case 4:e.css({left:"0px",right:"",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=4;break;case 5:e.css({left:"",right:"0px",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=5;break;default:e.css({left:"0px",right:"",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=1}}else console.warn("请初始化Log")},this.log=function(t){""!=t&&($("#"+this.content).prepend("<pre style='color: #fff;white-space: pre-wrap;word-wrap: break-word;'>LOG:"+t+"</pre>"),console.log("msLog.log:"+t))},this.error=function(t){""!=t&&($("#"+this.content).prepend("<pre style='color: #ff0000;white-space: pre-wrap;word-wrap: break-word;'>ERROR:"+t+"</pre>"),console.error("msLog.error:"+t))},this.warn=function(t){""!=t&&($("#"+this.content).prepend("<pre style='color: #fff700;white-space: pre-wrap;word-wrap: break-word;'>WARN:"+t+"</pre>"),console.warn("msLog.warn:"+t))},this.info=function(t){""!=t&&($("#"+this.content).prepend("<pre style='color: #54b8ff;white-space: pre-wrap;word-wrap: break-word;'>INFO:"+t+"</pre>"),console.info("msLog.info:"+t))},this.trace=function(t){""!=t&&($("#"+this.content).prepend("<pre style='color: #4bff50;white-space: pre-wrap;word-wrap: break-word;'>TRACE:"+t+"</pre>"),console.trace("msLog.trace:"+t))},this.clear=function(){$("#"+this.content).html("")},this.close=function(){$("#"+this.id).fadeOut(200)},this.show=function(){$("#"+this.id).fadeIn(200)}},t.loadings=function(t,e,i){var n=new Array;if(Array.isArray(t)&&(n=t),e)for(var o=document.getElementsByTagName("img"),a=o.length,r=0;r<a;r++)n.push(o[r].src);for(r=0;r<n.length;r++){var s=new Image;s.src=n[r],s.imgid=r,s.onload=f}var l=0;function f(t){if(l++,null!=i){var e=new Object;e.total=n.length,e.id=t.target.imgid,e.currenter=l,e.bfb=parseInt(l/n.length*100),i(e)}}},t.isOpenID=function(t){return!(null==t||void 0==typeof t||null==typeof t||""==t||t<=0||"null"==t||"undefined"==t)},t.getPathName=function(){var t=window.location.pathname,e=t.indexOf(".");return-1!=e&&(t=t.substring(0,e)),t.substring(0,t.lastIndexOf("/"))},t.getHost=function(){return window.location.protocol+"//"+window.location.host+t.getPathName()+"/"},t.isIphoneX=function(){var t=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),e=window.innerWidth/window.innerHeight;return!!(t&&e<.52)},t.getFloat=function(t,e,i){var n=e=isNaN(Number(e))?2:Number(e);n=0==n?2:n;var o=parseFloat(t);if(isNaN(o))return console.error("需要填写正确的转换数值"),!1;var a=Math.pow(10,n),r=Math.round(o*a)/a;if(1==i){var s=r.toString();for(s.indexOf(".")<0&&(s+=".");s.length<=n+2;)s+="0";r=s}return r},t.reSet=function(e,i,n,o){if(t.jQueryOrZepto()){var a,r,s;r=n,s=o,void 0!==(a=e)&&""!=a||(a=".csBox"),(void 0===r||""==r||r<=0)&&(r=750),(void 0===s||""==s||s<=0)&&(s=1136);var l=!1,f=window.innerWidth/window.innerHeight;f<.56&&(l=!0),$(a).each(function(t){var e=function(t){var e={};e.target=t,e.Eheight=t.attr("height"),e.Ewidth=t.attr("width"),e.Eleft=t.attr("left"),e.Etop=t.attr("top"),e.scale=window.innerHeight/s,e.Xtop=0,l&&(console.log("矮小比例"),e.scale=window.innerHeight*(1-(.63-f))/s,e.Xtop=(window.innerHeight-s*e.scale)/2);e.newWidth=e.Ewidth*e.scale,e.newHeight=e.Eheight*e.scale,e.marginLeft=(window.innerWidth-r*e.scale)/2+e.Eleft*e.scale,e.marginTop=e.Etop*e.scale+e.Xtop;var i=t.attr("cs-name");e.name=""!=i?i:t.attr("src");return e}($(this));$(this).css({position:"absolute",width:e.newWidth,height:e.newHeight,"margin-left":e.marginLeft,"margin-top":e.marginTop}),null!=i&&i(e,t,$(a).length)})}},t.reSet_test3=function(e){var i={};i.default={target:".csBox",dw:900,dh:1624,sw:750,sh:1204,safeW:750,safeH:1204,offx:null,offy:null,scaleAutoWidth:!0,scaleAutoHeight:!0,change:function(t){},complete:function(t){},scale:null,width:window.innerWidth,height:window.innerHeight},i.targets=[],i.param=e||{};for(var n in i.param){i.default[n]=i.param[n];for(var o in i.param[n])i.default[n][o]=i.param[n][o]}null==i.default.scale&&(i.default.scale=i.default.height/i.default.sh,i.default.scale=t.getFloat(i.default.scale,4)),null==i.default.offx&&(i.default.offx=(i.default.sw-i.default.dw)/2),null==i.default.offy&&(i.default.offy=(i.default.sh-i.default.dh)/2);var a=i.default.target.slice(0,1);if("#"==a){console.log("使用 ID 选择器");var r=document.getElementById(i.default.target.slice(1))}else if("."==a){console.log("使用 类 选择器");r=document.getElementsByClassName(i.default.target.slice(1))}else{console.log("默认：使用类 选择器");r=document.getElementsByClassName(i.default.target)}var s={};1==i.default.scaleAutoWidth&&(s.offsetX=(i.default.width-i.default.dw*i.default.scale)/2,s.offsetX=t.getFloat(s.offsetX,4),s.safaX=(i.default.safeW-i.default.dw)/2*i.default.scale,s.safaX=t.getFloat(s.safaX,4),s.isX=s.offsetX<s.safaX,s.reScaleW=(s.offsetX-s.safaX)/i.default.width,s.reScaleW=t.getFloat(s.reScaleW,4),s.isX&&(i.default.scale+=s.reScaleW,i.default.scale=t.getFloat(i.default.scale,4),console.warn("根据宽度-缩放系数重新修订：",i.default.scale)));var l={};0==s.isX&&1==i.default.scaleAutoHeight&&(l.newHeight=parseFloat((i.default.dh*i.default.scale).toFixed(3)),l.offsetY=(i.default.height-i.default.dh*i.default.scale)/2,l.offsetY=t.getFloat(l.offsetY,4),l.safaY=(i.default.dh-i.default.safeH)/2*i.default.scale,l.safaY=t.getFloat(l.safaY,4),l.isY=l.offsetY<l.offsetY,l.reScaleH=(l.offsetY-l.safaY)/i.default.height,l.reScaleH=t.getFloat(l.reScaleH,4),l.isY&&(i.default.scale+=l.reScaleH,console.warn("根据高度-缩放系数重新修订：",i.default.scale)));for(var f=0;f<r.length;f++){var d=r[f];i.targets.push(d);var c=h(d);d.style.width=c.newWidth+"px",d.style.height=c.newHeight+"px",d.style.position="absolute",d.style.marginLeft=c.marginLeft+"px",d.style.marginTop=c.marginTop+"px",i.default.change(c)}function h(t){var e={};if(e.target=t,e.Eheight=parseFloat(t.getAttribute("height")),e.Ewidth=parseFloat(t.getAttribute("width")),e.Eleft=parseFloat(t.getAttribute("left")),e.Etop=parseFloat(t.getAttribute("top")),e.scale=i.default.scale,e.newWidth=e.Ewidth*i.default.scale,e.newHeight=e.Eheight*i.default.scale,e.marginLeft=(i.default.width-i.default.sw*i.default.scale)/2+(e.Eleft+i.default.offx)*i.default.scale,e.marginTop=(i.default.height-i.default.sh*i.default.scale)/2+(e.Etop+i.default.offy)*i.default.scale,e.Etype=t.getAttribute("iforce-type"),null!=e.Etype&&""!=e.Etype){if(console.log("特殊配置"),-1!=e.Etype.indexOf(" ")){var n=e.Etype.split(" ");e.Tx=null!=n[0]&&""!=n[0]?n[0]:null,e.Ty=null!=n[1]&&""!=n[1]?n[1]:null}else e.Tx=e.Etype,"center"==e.Etype?e.Ty="center":e.Ty="top";switch(e.Xaxis=parseInt(t.getAttribute("iforce-x")),e.Yaxis=parseInt(t.getAttribute("iforce-y")),e.Xaxis=isNaN(e.Xaxis)?0:e.Xaxis,e.Yaxis=isNaN(e.Yaxis)?0:e.Yaxis,e.Tx){case"left":e.marginLeft=e.Xaxis;break;case"center":e.marginLeft=(i.default.width-e.newWidth)/2+e.Xaxis,console.log(e.marginLeft);break;case"right":e.marginLeft=i.default.width-e.newWidth-e.Xaxis;break;default:e.marginLeft=e.Xaxis}switch(e.Ty){case"top":e.marginTop=e.Yaxis;break;case"center":e.marginTop=(i.default.height-e.newHeight)/2+e.Yaxis;break;case"bottom":e.marginTop=i.default.height-e.newHeight-e.Yaxis;break;default:e.marginTop=e.Yaxis}}return e}i.default.complete(i)},t.reSetW_test=function(e,i,n,o){if(t.jQueryOrZepto()){var a,r,s;r=n,s=o,void 0!==(a=e)&&""!=a||(a=".csBox"),(void 0===r||""==r||r<=0)&&(r=750),(void 0===s||""==s||s<=0)&&(s=1136);var l=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/);console.log(l);var f=window.innerWidth/window.innerHeight;l&&f<.52&&console.log("这是苹果X噢"),$(a).each(function(t){var e=function(t){this.target=t,this.Eheight=t.attr("height"),this.Ewidth=t.attr("width"),this.scale=window.innerWidth/r,l&&f<.52&&(console.log("这是苹果X噢"),console.log(f));this.Eleft=t.attr("left"),this.Etop=t.attr("top"),this.newWidth=this.Ewidth*this.scale,this.newHeight=this.Eheight*this.scale,this.marginLeft=this.Eleft*this.scale,this.marginTop=(window.innerHeight-s*this.scale)/2+this.Etop*this.scale;var e=t.attr("cs-name");this.name=""!=e?e:t.attr("src");return this}($(this));$(this).css({position:"absolute",width:e.newWidth,height:e.newHeight,"margin-left":e.marginLeft,"margin-top":e.marginTop}),null!=i&&i(e,t,$(a).length)})}},t.getStrCenter=function(t,e,i){var n,o;return n=t.indexOf(e),o=t.indexOf(i),t.substring(n+1,o)},t.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)},t.arrIndexOf=function(t,e){if(t&&t.indexOf)return t.indexOf(e);for(var i=t.length,n=0;n<i;n++)if(t[n]==e)return n;return-1},t.rand=function(t,e){var i=e-t,n=Math.random();return t+Math.round(n*i)},t.getNowFormatDate=function(t){var e=new Date,i=e.getFullYear(),n=e.getMonth()+1,o=e.getDate();return n>=1&&n<=9&&(n="0"+n),o>=0&&o<=9&&(o="0"+o),1==t?i+"-"+n+"-"+o:2==t?e.getHours()+":"+e.getMinutes()+":"+e.getSeconds():i+"-"+n+"-"+o+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},t.isEmail=function(t){return!!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(t)},t.isName=function(t){return""!=t||-1!=t.search(/^[\u0391-\uFFE5\w]+$/)},t.isPhone=function(t){return!!/^1[34578]\d{9}$/.test(t)},t.browser=function(){var t=navigator.userAgent;navigator.appVersion;return{trident:t.indexOf("Trident")>-1,presto:t.indexOf("Presto")>-1,webKit:t.indexOf("AppleWebKit")>-1,gecko:t.indexOf("Gecko")>-1&&-1==t.indexOf("KHTML"),mobile:!!t.match(/AppleWebKit.*Mobile.*/),ios:!!t.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),iPhone:t.indexOf("iPhone")>-1,iPad:t.indexOf("iPad")>-1,webApp:-1==t.indexOf("Safari"),weixin:t.indexOf("MicroMessenger")>-1,qq:" qq"==t.match(/\sQQ/i),android:t.indexOf("Android")>-1||t.indexOf("Linux")>-1,txnews:t.indexOf("qqnews")>-1,sinawb:t.indexOf("weibo")>-1,mqq:t.indexOf("QQ")>-1}}(),t.isPC=function(){for(var t=navigator.userAgent,e=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),i=!0,n=0;n<e.length;n++)if(t.indexOf(e[n])>0){i=!1;break}return i}(),t.getALL=function(){querystr=window.location.href.split("?");var t=new Array;if(querystr[1]){var e=querystr[1].split("&");for(i=0;i<e.length;i++){var n=e[i].split("=");t[n[0]]=n[1]}}return t},t.getArg=function(t){for(var e=document.location.href,i=e.substring(e.indexOf("?")+1).split("&"),n=0;n<i.length;n++){if(-1!=i[n].indexOf(t+"="))return i[n].replace(t+"=","").replace("?","")}return""},t.setCookie=function(t,e){var i=new Date;i.setTime(i.getTime()+2592e6),document.cookie=t+"="+escape(e)+";expires="+i.toGMTString()},t.getCookie=function(t){var e,i=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return(e=document.cookie.match(i))?unescape(e[2]):null},t.delCookie=function(e){var i=new Date;i.setTime(i.getTime()-1);var n=t.getCookie(e);null!=n&&(document.cookie=e+"="+n+";expires="+i.toGMTString())},t.fn.init.prototype=t.fn,console.log("msTools:"+t.version)}();