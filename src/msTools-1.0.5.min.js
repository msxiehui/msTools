/*!
 * mstools -https://github.com/msxiehui/msTools#readme
 * Version - 1.0.5
 * Licensed under the MIT license - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 msxiehui@163.com
 *
 *
 */

!function(){var e=window.ms=window.$$=function(t,n){return new e.fn.init(t,n)};e.version="1.0.5",e.fn=e.prototype={init:function(e){return e&&(this.selector=e),this}},e.jQueryOrZepto=function(){return!(!window.jQuery&&!window.Zepto)||(console.error("此功能需要 jQuery或 Zepto 支持"),!1)},e.height=window.innerHeight,e.width=window.innerWidth,e.log=new function(){this.ready=!1,this.id="msLog",this.content="msCon",this.tool="msTool",this.pos=1;var e=this;this.init=function(t){null==t&&(t=$("body")),$("#msLog").length>0&&(this.id="ms_msLog"),$("#msCon").length>0&&(this.content="ms_msCon"),$("#msTool").length>0&&(this.tool="ms_msTool"),t.prepend('<div id="'+this.id+'" style="width: 50%;height: 30%;position: absolute;z-index: 999999; background: rgba(0,0,0,0.3);;"><div id="'+this.content+'" style="padding: 6px;height: 80%;width: 90%;overflow: auto;position: relative;"></div><div id="'+this.tool+'" style="position: absolute;width: 100%;z-index: 999; bottom: 0;text-align: center"><input type="button" value="切换位置" id="log_postion" style="z-index: 9999999;margin-right: 5px"><input type="button" value="清空" id="log_clear" style="z-index: 9999999;margin-right: 5px"><input type="button" value="关闭" id="log_close" style="z-index: 9999999;margin-right: 5px"> </div></div>'),this.ready=!0,this.position(),$("#log_postion").on("touchstart mousedown",function(t){t.stopPropagation(),e.pos<5?e.pos+=1:e.pos=1,e.position(e.pos)}),$("#log_clear").on("touchstart mousedown",function(t){t.stopPropagation(),e.clear()}),$("#log_close").on("touchstart mousedown",function(t){t.stopPropagation(),e.close()}),$("#"+this.content).on("touchstart",function(e){e.stopPropagation()}),$("#"+this.content).on("touchmove",function(e){e.stopPropagation()})},this.position=function(e){if(0!=this.ready){var t=$("#"+this.id);switch(e){case 2:t.css({left:"",right:"0px",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=2;break;case 3:t.css({left:"50%",right:"",top:"50%",bottom:"","margin-left":"-25%","margin-top":"-25%"}),this.pos=3;break;case 4:t.css({left:"0px",right:"",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=4;break;case 5:t.css({left:"",right:"0px",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=5;break;default:t.css({left:"0px",right:"",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=1}}else console.warn("请初始化Log")},this.log=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #fff;white-space: pre-wrap;word-wrap: break-word;'>LOG:"+e+"</pre>"),console.log("msLog.log:"+e))},this.error=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #ff0000;white-space: pre-wrap;word-wrap: break-word;'>ERROR:"+e+"</pre>"),console.error("msLog.error:"+e))},this.warn=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #fff700;white-space: pre-wrap;word-wrap: break-word;'>WARN:"+e+"</pre>"),console.warn("msLog.warn:"+e))},this.info=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #54b8ff;white-space: pre-wrap;word-wrap: break-word;'>INFO:"+e+"</pre>"),console.info("msLog.info:"+e))},this.trace=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #4bff50;white-space: pre-wrap;word-wrap: break-word;'>TRACE:"+e+"</pre>"),console.trace("msLog.trace:"+e))},this.clear=function(){$("#"+this.content).html("")},this.close=function(){$("#"+this.id).fadeOut(200)},this.show=function(){$("#"+this.id).fadeIn(200)}},e.loadings=function(e,t,n){var o=new Array;if(Array.isArray(e)&&(o=e),t)for(var i=document.getElementsByTagName("img"),a=i.length,r=0;r<a;r++)o.push(i[r].src);for(r=0;r<o.length;r++){var s=new Image;s.src=o[r],s.imgid=r,s.onload=f}var l=0;function f(e){if(l++,null!=n){var t=new Object;t.total=o.length,t.id=e.target.imgid,t.currenter=l,t.bfb=parseInt(l/o.length*100),n(t)}}},e.isNullStr=function(e,t,n,o,i){if("string"!=typeof e&&"number"!=typeof e)return console.log("str 类型：",typeof e),!0;var a=e.toString();if(console.log(a),""==a||"null"==a||"undefined"==a)return!0;if(null!=t&&(console.log("判断最小长度"),a.length<t))return!0;if(null!=n&&(console.log("判断最大长度"),a.length>n))return!0;if(null!=o)if(i=null==i||i,Array.isArray(o)){for(var r in o)if(-1!=a.indexOf(o[r]))return!!i}else if(-1!=a.indexOf(o))return!!i;return!1},e.getPathName=function(){var e=window.location.pathname,t=e.indexOf(".");return-1!=t&&(e=e.substring(0,t)),e.substring(0,e.lastIndexOf("/"))},e.getHost=function(){return window.location.protocol+"//"+window.location.host+e.getPathName()+"/"},e.isIphoneX=function(){var e=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t=window.innerWidth/window.innerHeight;return!!(e&&t<.52)},e.getFloat=function(e,t,n){var o=t=isNaN(Number(t))?2:Number(t);o=0==o?2:o;var i=parseFloat(e);if(isNaN(i))return console.error("需要填写正确的转换数值"),!1;var a=Math.pow(10,o),r=Math.round(i*a)/a;if(1==n){var s=r.toString();for(s.indexOf(".")<0&&(s+=".");s.length<=o+2;)s+="0";r=s}return r},e.reSet=function(t){var n={};n.default={target:".csBox",dw:900,dh:1624,sw:750,sh:1200,safeW:750,safeH:1200,offx:null,offy:null,scaleAutoWidth:!0,scaleAutoHeight:!0,change:function(e){},complete:function(e){},scale:null,width:window.innerWidth,height:window.innerHeight},n.targets=[],n.param=t||{};for(var o in n.param){n.default[o]=n.param[o];for(var i in n.param[o])n.default[o][i]=n.param[o][i]}null==n.default.scale&&(n.default.scale=n.default.height/n.default.sh,n.default.scale=e.getFloat(n.default.scale,4)),null==n.default.offx&&(n.default.offx=(n.default.sw-n.default.dw)/2),null==n.default.offy&&(n.default.offy=(n.default.sh-n.default.dh)/2);var a=n.default.target.slice(0,1);if("#"==a){console.log("使用 ID 选择器");var r=document.getElementById(n.default.target.slice(1))}else if("."==a){console.log("使用 类 选择器");r=document.getElementsByClassName(n.default.target.slice(1))}else{console.log("默认：使用类 选择器");r=document.getElementsByClassName(n.default.target)}var s={};1==n.default.scaleAutoWidth&&(s.offsetX=(n.default.width-n.default.dw*n.default.scale)/2,s.offsetX=e.getFloat(s.offsetX,4),s.safaX=(n.default.safeW-n.default.dw)/2*n.default.scale,s.safaX=e.getFloat(s.safaX,4),s.isX=s.offsetX<s.safaX,s.reScaleW=(s.offsetX-s.safaX)/n.default.width,s.reScaleW=e.getFloat(s.reScaleW,4),s.isX&&(n.default.scale+=s.reScaleW,n.default.scale=e.getFloat(n.default.scale,4),console.warn("根据宽度-缩放系数重新修订：",n.default.scale)));var l={};0==s.isX&&1==n.default.scaleAutoHeight&&(l.newHeight=parseFloat((n.default.dh*n.default.scale).toFixed(3)),l.offsetY=(n.default.height-n.default.dh*n.default.scale)/2,l.offsetY=e.getFloat(l.offsetY,4),l.safaY=(n.default.dh-n.default.safeH)/2*n.default.scale,l.safaY=e.getFloat(l.safaY,4),l.isY=l.offsetY<l.offsetY,l.reScaleH=(l.offsetY-l.safaY)/n.default.height,l.reScaleH=e.getFloat(l.reScaleH,4),l.isY&&(n.default.scale+=l.reScaleH,console.warn("根据高度-缩放系数重新修订：",n.default.scale))),n.autoScaleW=s,n.autoScaleH=l;for(var f=0;f<r.length;f++){var u=r[f],d=c(u);n.targets.push(d),u.style.width=d.newWidth+"px",u.style.height=d.newHeight+"px",u.style.position="absolute",u.style.marginLeft=d.marginLeft+"px",u.style.marginTop=d.marginTop+"px",n.default.change(d)}function c(e){var t={};if(t.target=e,t.Eheight=parseFloat(e.getAttribute("height")),t.Ewidth=parseFloat(e.getAttribute("width")),t.Eleft=parseFloat(e.getAttribute("left")),t.Etop=parseFloat(e.getAttribute("top")),t.scale=n.default.scale,t.newWidth=t.Ewidth*n.default.scale,t.newHeight=t.Eheight*n.default.scale,t.marginLeft=(n.default.width-n.default.sw*n.default.scale)/2+(t.Eleft+n.default.offx)*n.default.scale,t.marginTop=(n.default.height-n.default.sh*n.default.scale)/2+(t.Etop+n.default.offy)*n.default.scale,t.Etype=e.getAttribute("iforce-type"),null!=t.Etype&&""!=t.Etype){if(-1!=t.Etype.indexOf(" ")){var o=t.Etype.split(" ");t.Tx=null!=o[0]&&""!=o[0]?o[0]:null,t.Ty=null!=o[1]&&""!=o[1]?o[1]:null}else t.Tx=t.Etype,"center"==t.Etype?t.Ty="center":t.Ty="top";switch(t.Xaxis=parseInt(e.getAttribute("iforce-x")),t.Yaxis=parseInt(e.getAttribute("iforce-y")),t.Xaxis=isNaN(t.Xaxis)?0:t.Xaxis,t.Yaxis=isNaN(t.Yaxis)?0:t.Yaxis,t.Tx){case"left":t.marginLeft=t.Xaxis;break;case"center":t.marginLeft=(n.default.width-t.newWidth)/2+t.Xaxis;break;case"right":t.marginLeft=n.default.width-t.newWidth-t.Xaxis;break;default:t.marginLeft=t.Xaxis}switch(t.Ty){case"top":t.marginTop=t.Yaxis;break;case"center":t.marginTop=(n.default.height-t.newHeight)/2+t.Yaxis;break;case"bottom":t.marginTop=n.default.height-t.newHeight-t.Yaxis;break;default:t.marginTop=t.Yaxis}}return t}n.default.complete(n)},e.getStrCenter=function(e,t,n){var o,i;return o=e.indexOf(t),i=e.indexOf(n),e.substring(o+1,i)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.arrIndexOf=function(e,t){if(e&&e.indexOf)return e.indexOf(t);for(var n=e.length,o=0;o<n;o++)if(e[o]==t)return o;return-1},e.rand=function(e,t){var n=t-e,o=Math.random();return e+Math.round(o*n)},e.getNowFormatDate=function(e){var t=new Date,n=t.getFullYear(),o=t.getMonth()+1,i=t.getDate();return o>=1&&o<=9&&(o="0"+o),i>=0&&i<=9&&(i="0"+i),1==e?n+"-"+o+"-"+i:2==e?t.getHours()+":"+t.getMinutes()+":"+t.getSeconds():n+"-"+o+"-"+i+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.isEmail=function(e){return!!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e)},e.isName=function(e){return""!=e||-1!=e.search(/^[\u0391-\uFFE5\w]+$/)},e.isPhone=function(e){return!!/^1[34578]\d{9}$/.test(e)},e.browser=function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"==e.match(/\sQQ/i),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,txnews:e.indexOf("qqnews")>-1,sinawb:e.indexOf("weibo")>-1,mqq:e.indexOf("QQ")>-1}}(),e.isPC=function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),n=!0,o=0;o<t.length;o++)if(e.indexOf(t[o])>0){n=!1;break}return n}(),e.getALL=function(){querystr=window.location.href.split("?");var e=new Array;if(querystr[1]){var t=querystr[1].split("&");for(i=0;i<t.length;i++){var n=t[i].split("=");e[n[0]]=n[1]}}return e},e.getArg=function(e){for(var t=document.location.href,n=t.substring(t.indexOf("?")+1).split("&"),o=0;o<n.length;o++){if(-1!=n[o].indexOf(e+"="))return n[o].replace(e+"=","").replace("?","")}return""},e.setCookie=function(e,t){var n=new Date;n.setTime(n.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},e.getCookie=function(e){var t,n=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(n))?unescape(t[2]):null},e.delCookie=function(t){var n=new Date;n.setTime(n.getTime()-1);var o=e.getCookie(t);null!=o&&(document.cookie=t+"="+o+";expires="+n.toGMTString())},e.fn.init.prototype=e.fn,console.log("msTools:"+e.version)}();