/*!
 * mstools -https://github.com/msxiehui/msTools#readme
 * Version - 1.0 5.1103-aplha
 * Licensed under the MIT license - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 msxiehui@163.com
 *
 *
 */

!function(){var c=window.ms=window.$$=function(e,t){return new c.fn.init(e,t)};c.buildversion="1.0",c.internalversion="5.1103-aplha",c.version=c.buildversion+"."+c.internalversion,c.fn=c.prototype={init:function(e){return e&&(this.selector=e),this}},c.jQueryOrZepto=function(){return!(!window.jQuery&&!window.Zepto)||(console.error("此功能需要 jQuery或 Zepto 支持"),!1)},c.height=window.innerHeight,c.width=window.innerWidth,c.log=new function(){this.ready=!1,this.id="msLog",this.content="msCon",this.tool="msTool",this.pos=1;var t=this;this.init=function(e){null==e&&(e=$("body")),0<$("#msLog").length&&(this.id="ms_msLog"),0<$("#msCon").length&&(this.content="ms_msCon"),0<$("#msTool").length&&(this.tool="ms_msTool"),e.prepend('<div id="'+this.id+'" style="width: 50%;height: 30%;position: absolute;z-index: 999999; background: rgba(0,0,0,0.3);;"><div id="'+this.content+'" style="padding: 6px;height: 80%;width: 90%;overflow: auto;position: relative;"></div><div id="'+this.tool+'" style="position: absolute;width: 100%;z-index: 999; bottom: 0;text-align: center"><input type="button" value="切换位置" id="log_postion" style="z-index: 9999999;margin-right: 5px"><input type="button" value="清空" id="log_clear" style="z-index: 9999999;margin-right: 5px"><input type="button" value="关闭" id="log_close" style="z-index: 9999999;margin-right: 5px"> </div></div>'),this.ready=!0,this.position(),$("#log_postion").on("touchstart mousedown",function(e){e.stopPropagation(),t.pos<5?t.pos+=1:t.pos=1,t.position(t.pos)}),$("#log_clear").on("touchstart mousedown",function(e){e.stopPropagation(),t.clear()}),$("#log_close").on("touchstart mousedown",function(e){e.stopPropagation(),t.close()}),$("#"+this.content).on("touchstart",function(e){e.stopPropagation()}),$("#"+this.content).on("touchmove",function(e){e.stopPropagation()})},this.position=function(e){if(0!=this.ready){var t=$("#"+this.id);switch(e){case 2:t.css({left:"",right:"0px",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=2;break;case 3:t.css({left:"50%",right:"",top:"50%",bottom:"","margin-left":"-25%","margin-top":"-25%"}),this.pos=3;break;case 4:t.css({left:"0px",right:"",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=4;break;case 5:t.css({left:"",right:"0px",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=5;break;default:t.css({left:"0px",right:"",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=1}}else console.warn("请初始化Log")},this.log=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #fff;white-space: pre-wrap;word-wrap: break-word;'>LOG:"+e+"</pre>"),console.log("msLog.log:"+e))},this.error=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #ff0000;white-space: pre-wrap;word-wrap: break-word;'>ERROR:"+e+"</pre>"),console.error("msLog.error:"+e))},this.warn=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #fff700;white-space: pre-wrap;word-wrap: break-word;'>WARN:"+e+"</pre>"),console.warn("msLog.warn:"+e))},this.info=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #54b8ff;white-space: pre-wrap;word-wrap: break-word;'>INFO:"+e+"</pre>"),console.info("msLog.info:"+e))},this.trace=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #4bff50;white-space: pre-wrap;word-wrap: break-word;'>TRACE:"+e+"</pre>"),console.trace("msLog.trace:"+e))},this.clear=function(){$("#"+this.content).html("")},this.close=function(){$("#"+this.id).fadeOut(200)},this.show=function(){$("#"+this.id).fadeIn(200)}},c.loadings=function(e,t,a){var i=new Array;if(Array.isArray(e)&&(i=e),t)for(var n=document.getElementsByTagName("img"),o=n.length,r=0;r<o;r++)n[r].src&&i.push(n[r].src);for(r=0;r<i.length;r++){var l=new Image;l.src=i[r],l.imgid=r,l.onload=f}var s=0;function f(e){if(s++,null!=a){var t=new Object;t.total=i.length,t.id=e.target.imgid,t.currenter=s,t.bfb=parseInt(s/i.length*100),a(t)}}},c.isNullStr=function(e,t,a,i,n){if("string"!=typeof e&&"number"!=typeof e)return console.log("str 类型：",typeof e),!0;var o=e.toString();if(console.log(o),""==o||"null"==o||"undefined"==o)return!0;if(null!=t&&(console.log("判断最小长度"),o.length<t))return!0;if(null!=a&&(console.log("判断最大长度"),o.length>a))return!0;if(null!=i)if(n=null==n||n,Array.isArray(i)){for(var r in i)if(-1!=o.indexOf(i[r]))return!!n}else if(-1!=o.indexOf(i))return!!n;return!1},c.getPathName=function(){var e=window.location.pathname,t=e.indexOf(".");return-1!=t&&(e=e.substring(0,t)),e.substring(0,e.lastIndexOf("/"))},c.getHost=function(){return window.location.protocol+"//"+window.location.host+c.getPathName()+"/"},c.isIphoneX=function(){var e=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t=window.innerWidth/window.innerHeight;return!!(e&&t<.52)},c.getFloat=function(e,t,a){var i=t=isNaN(Number(t))?2:Number(t);i=0==i?2:i;var n=parseFloat(e);if(isNaN(n))return console.error("需要填写正确的转换数值"),!1;var o=Math.pow(10,i),r=Math.round(n*o)/o;if(1==a){var l=r.toString();for(l.indexOf(".")<0&&(l+=".");l.length<=i+2;)l+="0";r=l}return r},c.reSet=function(e){var i={};for(var t in i.default={target:".csBox",dw:900,dh:1624,sw:750,sh:1200,safeW:750,safeH:1200,offx:null,offy:null,offy:null,transformOrigin:"50%",rotate:0,scaleAutoWidth:!0,scaleAutoHeight:!0,change:function(e){},complete:function(e){},scale:null,width:window.innerWidth,height:window.innerHeight},i.targets=[],i.param=e||{},i.param)for(var a in i.default[t]=i.param[t],i.param[t])i.default[t][a]=i.param[t][a];null==i.default.scale&&(i.default.scale=i.default.height/i.default.sh,i.default.scale=c.getFloat(i.default.scale,4)),null==i.default.offx&&(i.default.offx=(i.default.sw-i.default.dw)/2),null==i.default.offy&&(i.default.offy=(i.default.sh-i.default.dh)/2);var n=i.default.target.slice(0,1);if("#"==n){console.log("使用 ID 选择器");var o=document.getElementById(i.default.target.slice(1))}else if("."==n){console.log("使用 类 选择器");o=document.getElementsByClassName(i.default.target.slice(1))}else{console.log("默认：使用类 选择器");o=document.getElementsByClassName(i.default.target)}var r={};1==i.default.scaleAutoWidth&&(r.offsetX=(i.default.width-i.default.dw*i.default.scale)/2,r.offsetX=c.getFloat(r.offsetX,4),r.safaX=(i.default.safeW-i.default.dw)/2*i.default.scale,r.safaX=c.getFloat(r.safaX,4),r.isX=r.offsetX<r.safaX,r.reScaleW=(r.offsetX-r.safaX)/i.default.width,r.reScaleW=c.getFloat(r.reScaleW,4),r.isX&&(i.default.scale+=r.reScaleW,i.default.scale=c.getFloat(i.default.scale,4),console.warn("根据宽度-缩放系数重新修订：",i.default.scale)));var l={};0==r.isX&&1==i.default.scaleAutoHeight&&(l.newHeight=parseFloat((i.default.dh*i.default.scale).toFixed(3)),l.offsetY=(i.default.height-i.default.dh*i.default.scale)/2,l.offsetY=c.getFloat(l.offsetY,4),l.safaY=(i.default.dh-i.default.safeH)/2*i.default.scale,l.safaY=c.getFloat(l.safaY,4),l.isY=l.offsetY<l.offsetY,l.reScaleH=(l.offsetY-l.safaY)/i.default.height,l.reScaleH=c.getFloat(l.reScaleH,4),l.isY&&(i.default.scale+=l.reScaleH,console.warn("根据高度-缩放系数重新修订：",i.default.scale))),i.autoScaleW=r,i.autoScaleH=l;for(var s=0;s<o.length;s++){var f=o[s],u=d(f);i.targets.push(u),f.style.width=u.newWidth+"px",f.style.height=u.newHeight+"px",f.style.position="absolute",f.style.marginLeft=u.marginLeft+"px",f.style.marginTop=u.marginTop+"px",f.style.transformOrigin=i.default.transformOrigin,f.style.transform="rotate("+i.default.rotate+"deg)",i.default.change(u)}function d(e){var t={};if(t.target=e,t.Eheight=parseFloat(e.getAttribute("height")),t.Ewidth=parseFloat(e.getAttribute("width")),t.Eleft=parseFloat(e.getAttribute("left")),t.Etop=parseFloat(e.getAttribute("top")),t.scale=i.default.scale,t.newWidth=t.Ewidth*i.default.scale,t.newHeight=t.Eheight*i.default.scale,t.marginLeft=(i.default.width-i.default.sw*i.default.scale)/2+(t.Eleft+i.default.offx)*i.default.scale,t.marginTop=(i.default.height-i.default.sh*i.default.scale)/2+(t.Etop+i.default.offy)*i.default.scale,t.Etype=e.getAttribute("iforce-type"),null!=t.Etype&&""!=t.Etype){if(-1!=t.Etype.indexOf(" ")){var a=t.Etype.split(" ");t.Tx=null!=a[0]&&""!=a[0]?a[0]:null,t.Ty=null!=a[1]&&""!=a[1]?a[1]:null}else t.Tx=t.Etype,"center"==t.Etype?t.Ty="center":t.Ty="top";switch(t.Xaxis=e.getAttribute("iforce-x"),t.Yaxis=e.getAttribute("iforce-y"),t.Xaxis=null==t.Xaxis?t.Xaxis=0:-1!=t.Xaxis.indexOf("%")?parseInt(t.Xaxis)/100*i.default.width:parseInt(t.Xaxis),t.Yaxis=null==t.Yaxis?t.Yaxis=0:-1!=t.Yaxis.indexOf("%")?parseInt(t.Yaxis)/100*i.default.height:parseInt(t.Yaxis),console.log("-------------:"+t.Xaxis,t.Yaxis),t.Tx){case"left":t.marginLeft=t.Xaxis;break;case"center":t.marginLeft=(i.default.width-t.newWidth)/2+t.Xaxis;break;case"right":t.marginLeft=i.default.width-t.newWidth-t.Xaxis;break;default:t.marginLeft=t.Xaxis}switch(t.Ty){case"top":t.marginTop=t.Yaxis;break;case"center":t.marginTop=(i.default.height-t.newHeight)/2+t.Yaxis;break;case"bottom":t.marginTop=i.default.height-t.newHeight-t.Yaxis;break;default:t.marginTop=t.Yaxis}}return t}i.default.complete(i)},c.reSetV=function(e){var i={};for(var t in i.default={target:".csBox",dw:900,dh:1624,sw:750,sh:1200,safeW:750,safeH:1200,offx:null,offy:null,transformOrigin:"0px 0px 0px",rotate:-90,scaleAutoWidth:!0,scaleAutoHeight:!0,change:function(e){},complete:function(e){},scale:null,width:window.innerWidth,height:window.innerHeight},i.targets=[],i.param=e||{},i.param)for(var a in i.default[t]=i.param[t],i.param[t])i.default[t][a]=i.param[t][a];null==i.default.scale&&(i.default.scale=i.default.width/i.default.sh,i.default.scale=c.getFloat(i.default.scale,4)),console.log(i.default.scale),null==i.default.offy&&(i.default.offy=(i.default.sw-i.default.dw)/2),null==i.default.offx&&(i.default.offx=(i.default.sh-i.default.dh)/2);var n=i.default.target.slice(0,1);if("#"==n){console.log("使用 ID 选择器");var o=document.getElementById(i.default.target.slice(1))}else if("."==n){console.log("使用 类 选择器");o=document.getElementsByClassName(i.default.target.slice(1))}else{console.log("默认：使用类 选择器");o=document.getElementsByClassName(i.default.target)}var r={};1==i.default.scaleAutoWidth&&(r.newWidth=parseFloat((i.default.dw*i.default.scale).toFixed(3)),r.offsetX=(i.default.width-i.default.dh*i.default.scale)/2,r.offsetX=c.getFloat(r.offsetX,4),r.safaX=(i.default.safeH-i.default.dh)/2*i.default.scale,r.safaX=c.getFloat(r.safaX,4),r.isX=r.offsetX<r.offsetX,r.reScaleW=(r.offsetX-r.safaX)/i.default.width,r.reScaleW=c.getFloat(r.reScaleW,4),r.isX&&(i.default.scale+=r.reScaleW,console.warn("根据宽度-缩放系数重新修订：",i.default.scale)));var l={};0==r.isX&&1==i.default.scaleAutoHeight&&(l.offsetY=(i.default.height-i.default.dw*i.default.scale)/2,l.offsetY=c.getFloat(l.offsetY,4),l.safaY=(i.default.safeW-i.default.dw)/2*i.default.scale,l.safaY=c.getFloat(l.safaY,4),l.isY=l.offsetY<l.safaY,l.reScaleH=(l.offsetY-l.safaY)/i.default.height,l.reScaleH=c.getFloat(l.reScaleH,4),l.isY&&(i.default.scale+=l.reScaleH,i.default.scale=c.getFloat(i.default.scale,4),console.warn("横屏-根据高度-缩放系数重新修订：",i.default.scale))),i.autoScaleW=r,i.autoScaleH=l;for(var s=0;s<o.length;s++){var f=o[s],u=d(f);i.targets.push(u),f.style.width=u.newWidth+"px",f.style.height=u.newHeight+"px",f.style.position="absolute",f.style.marginLeft=u.marginLeft+"px",f.style.marginTop=u.marginTop+"px",f.style.transformOrigin=i.default.transformOrigin,f.style.transform="rotate("+i.default.rotate+"deg)",i.default.change(u)}function d(e){var t={};if(t.target=e,t.Eheight=parseFloat(e.getAttribute("height")),t.Ewidth=parseFloat(e.getAttribute("width")),t.Eleft=parseFloat(e.getAttribute("left")),t.Etop=parseFloat(e.getAttribute("top")),t.scale=i.default.scale,t.newWidth=t.Ewidth*i.default.scale,t.newHeight=t.Eheight*i.default.scale,t.Etype=e.getAttribute("iforce-type"),null!=t.Etype&&""!=t.Etype){if(-1!=t.Etype.indexOf(" ")){var a=t.Etype.split(" ");t.Tx=null!=a[0]&&""!=a[0]?a[0]:null,t.Ty=null!=a[1]&&""!=a[1]?a[1]:null}else t.Tx=t.Etype,"center"==t.Etype?t.Ty="center":t.Ty="top";switch(t.Xaxis=parseInt(e.getAttribute("iforce-y")),t.Yaxis=parseInt(e.getAttribute("iforce-x")),t.Xaxis=isNaN(t.Xaxis)?0:t.Xaxis,t.Yaxis=isNaN(t.Yaxis)?0:t.Yaxis,t.Tx){case"left":t.marginLeft=t.Xaxis;break;case"center":t.marginLeft=(i.default.width-t.newWidth)/2+t.Xaxis;break;case"right":t.marginLeft=i.default.width-t.newWidth-t.Xaxis;break;default:t.marginLeft=t.Xaxis}switch(t.Ty){case"top":t.marginTop=t.Yaxis;break;case"center":t.marginTop=(i.default.height-t.newHeight)/2+t.Yaxis;break;case"bottom":t.marginTop=i.default.height-t.newHeight-t.Yaxis;break;default:t.marginTop=t.Yaxis}t.marginTop=t.marginTop+t.newHeight}else t.marginTop=(i.default.height-i.default.sw*i.default.scale)/2+(t.Eleft+i.default.offy)*i.default.scale,t.marginTop=i.default.height-t.marginTop,t.marginLeft=(i.default.width-i.default.sh*i.default.scale)/2+(t.Etop+i.default.offx)*i.default.scale;return t}i.default.complete(i)},c.orientation=function(t,e){var a={currnum:0};a.time=isNaN(Number(e))?400:e;var i,n="number"==typeof window.orientation&&"object"==typeof window.onorientationchange,o=document.body.parentNode,r=function(){if(n)switch(a.event="orientationchange",i=window.orientation){case 90:case-90:i="landscape";break;default:i="portrait"}else i=window.innerWidth>window.innerHeight?"landscape":"portrait",a.event="resize";if(o.setAttribute("class",i),a.orientation=i,a.status="landscape"==i?0:1,a.msg="landscape"==i?"横":"竖",null!=t){var e=a.time;0==a.currnum&&(e=10),setTimeout(function(){a.currnum++,t(a)},e)}};n?window.addEventListener("orientationchange",r,!1):window.addEventListener("resize",r,!1),r()},c.getStrCenter=function(e,t,a){var i,n;return i=e.indexOf(t),n=e.indexOf(a),e.substring(i+1,n)},c.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},c.arrIndexOf=function(e,t){if(e&&e.indexOf)return e.indexOf(t);for(var a=e.length,i=0;i<a;i++)if(e[i]==t)return i;return-1},c.rand=function(e,t){var a=t-e,i=Math.random();return e+Math.round(i*a)},c.getNowFormatDate=function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return 1<=i&&i<=9&&(i="0"+i),0<=n&&n<=9&&(n="0"+n),1==e?a+"-"+i+"-"+n:2==e?t.getHours()+":"+t.getMinutes()+":"+t.getSeconds():a+"-"+i+"-"+n+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},c.isEmail=function(e){return!!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e)},c.isName=function(e){return""!=e||-1!=e.search(/^[\u0391-\uFFE5\w]+$/)},c.isPhone=function(e){return!!/^1[3456789]\d{9}$/.test(e)},c.browser=function(){var e=navigator.userAgent;navigator.appVersion;return{trident:-1<e.indexOf("Trident"),presto:-1<e.indexOf("Presto"),webKit:-1<e.indexOf("AppleWebKit"),gecko:-1<e.indexOf("Gecko")&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),iPhone:-1<e.indexOf("iPhone"),iPad:-1<e.indexOf("iPad"),webApp:-1==e.indexOf("Safari"),weixin:-1<e.indexOf("MicroMessenger"),qq:" qq"==e.match(/\sQQ/i),android:-1<e.indexOf("Android")||-1<e.indexOf("Linux"),txnews:-1<e.indexOf("qqnews"),sinawb:-1<e.indexOf("weibo"),mqq:-1<e.indexOf("QQ")}}(),c.isPC=function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),a=!0,i=0;i<t.length;i++)if(0<e.indexOf(t[i])){a=!1;break}return a}(),c.getALL=function(){querystr=window.location.href.split("?");var e=new Array;if(querystr[1]){var t=querystr[1].split("&");for(i=0;i<t.length;i++){var a=t[i].split("=");e[a[0]]=a[1]}}return e},c.getArg=function(e){for(var t=document.location.href,a=t.substring(t.indexOf("?")+1).split("&"),i=0;i<a.length;i++){if(-1!=a[i].indexOf(e+"="))return a[i].replace(e+"=","").replace("?","")}return""},c.setCookie=function(e,t){var a=new Date;a.setTime(a.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()},c.getCookie=function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},c.delCookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var a=c.getCookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())},c.fn.init.prototype=c.fn,console.log("msTools:"+c.version)}();