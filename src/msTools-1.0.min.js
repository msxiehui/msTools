/*!
 * mstools -https://github.com/msxiehui/msTools#readme
 * Version - 1.0
 * Licensed under the MIT license - http://opensource.org/licenses/MIT
 *
 * Copyright (c) 2018 msxiehui@163.com
 *
 *
 */

!function(){var e=window.ms=window.$$=function(t,a){return new e.fn.init(t,a)};e.buildversion="1.0",e.internalversion="5.0222-aplha",e.version=e.buildversion+"."+e.internalversion,e.fn=e.prototype={init:function(e){return e&&(this.selector=e),this}},e.jQueryOrZepto=function(){return!(!window.jQuery&&!window.Zepto)||(console.error("此功能需要 jQuery或 Zepto 支持"),!1)},e.height=window.innerHeight,e.width=window.innerWidth,e.log=new function(){this.ready=!1,this.id="msLog",this.content="msCon",this.tool="msTool",this.pos=1;var e=this;this.init=function(t){null==t&&(t=$("body")),$("#msLog").length>0&&(this.id="ms_msLog"),$("#msCon").length>0&&(this.content="ms_msCon"),$("#msTool").length>0&&(this.tool="ms_msTool"),t.prepend('<div id="'+this.id+'" style="width: 50%;height: 30%;position: absolute;z-index: 999999; background: rgba(0,0,0,0.3);;"><div id="'+this.content+'" style="padding: 6px;height: 80%;width: 90%;overflow: auto;position: relative;"></div><div id="'+this.tool+'" style="position: absolute;width: 100%;z-index: 999; bottom: 0;text-align: center"><input type="button" value="切换位置" id="log_postion" style="z-index: 9999999;margin-right: 5px"><input type="button" value="清空" id="log_clear" style="z-index: 9999999;margin-right: 5px"><input type="button" value="关闭" id="log_close" style="z-index: 9999999;margin-right: 5px"> </div></div>'),this.ready=!0,this.position(),$("#log_postion").on("touchstart mousedown",function(t){t.stopPropagation(),e.pos<5?e.pos+=1:e.pos=1,e.position(e.pos)}),$("#log_clear").on("touchstart mousedown",function(t){t.stopPropagation(),e.clear()}),$("#log_close").on("touchstart mousedown",function(t){t.stopPropagation(),e.close()}),$("#"+this.content).on("touchstart",function(e){e.stopPropagation()}),$("#"+this.content).on("touchmove",function(e){e.stopPropagation()})},this.position=function(e){if(0!=this.ready){var t=$("#"+this.id);switch(e){case 2:t.css({left:"",right:"0px",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=2;break;case 3:t.css({left:"50%",right:"",top:"50%",bottom:"","margin-left":"-25%","margin-top":"-25%"}),this.pos=3;break;case 4:t.css({left:"0px",right:"",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=4;break;case 5:t.css({left:"",right:"0px",top:"",bottom:"10px","margin-left":"","margin-top":""}),this.pos=5;break;default:t.css({left:"0px",right:"",top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=1}}else console.warn("请初始化Log")},this.log=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #fff;white-space: pre-wrap;word-wrap: break-word;'>LOG:"+e+"</pre>"),console.log("msLog.log:"+e))},this.error=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #ff0000;white-space: pre-wrap;word-wrap: break-word;'>ERROR:"+e+"</pre>"),console.error("msLog.error:"+e))},this.warn=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #fff700;white-space: pre-wrap;word-wrap: break-word;'>WARN:"+e+"</pre>"),console.warn("msLog.warn:"+e))},this.info=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #54b8ff;white-space: pre-wrap;word-wrap: break-word;'>INFO:"+e+"</pre>"),console.info("msLog.info:"+e))},this.trace=function(e){""!=e&&($("#"+this.content).prepend("<pre style='color: #4bff50;white-space: pre-wrap;word-wrap: break-word;'>TRACE:"+e+"</pre>"),console.trace("msLog.trace:"+e))},this.clear=function(){$("#"+this.content).html("")},this.close=function(){$("#"+this.id).fadeOut(200)},this.show=function(){$("#"+this.id).fadeIn(200)}},e.loadings=function(e,t,a){var i=new Array;if(Array.isArray(e)&&(i=e),t)for(var n=document.getElementsByTagName("img"),o=n.length,r=0;r<o;r++)i.push(n[r].src);for(r=0;r<i.length;r++){var l=new Image;l.src=i[r],l.imgid=r,l.onload=f}var s=0;function f(e){if(s++,null!=a){var t=new Object;t.total=i.length,t.id=e.target.imgid,t.currenter=s,t.bfb=parseInt(s/i.length*100),a(t)}}},e.isNullStr=function(e,t,a,i,n){if("string"!=typeof e&&"number"!=typeof e)return console.log("str 类型：",typeof e),!0;var o=e.toString();if(console.log(o),""==o||"null"==o||"undefined"==o)return!0;if(null!=t&&(console.log("判断最小长度"),o.length<t))return!0;if(null!=a&&(console.log("判断最大长度"),o.length>a))return!0;if(null!=i)if(n=null==n||n,Array.isArray(i)){for(var r in i)if(-1!=o.indexOf(i[r]))return!!n}else if(-1!=o.indexOf(i))return!!n;return!1},e.getPathName=function(){var e=window.location.pathname,t=e.indexOf(".");return-1!=t&&(e=e.substring(0,t)),e.substring(0,e.lastIndexOf("/"))},e.getHost=function(){return window.location.protocol+"//"+window.location.host+e.getPathName()+"/"},e.isIphoneX=function(){var e=!!navigator.userAgent.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),t=window.innerWidth/window.innerHeight;return!!(e&&t<.52)},e.getFloat=function(e,t,a){var i=t=isNaN(Number(t))?2:Number(t);i=0==i?2:i;var n=parseFloat(e);if(isNaN(n))return console.error("需要填写正确的转换数值"),!1;var o=Math.pow(10,i),r=Math.round(n*o)/o;if(1==a){var l=r.toString();for(l.indexOf(".")<0&&(l+=".");l.length<=i+2;)l+="0";r=l}return r},e.reSet=function(t){var a={};for(var i in a.default={target:".csBox",dw:900,dh:1624,sw:750,sh:1200,safeW:750,safeH:1200,offx:null,offy:null,scaleAutoWidth:!0,scaleAutoHeight:!0,change:function(e){},complete:function(e){},scale:null,width:window.innerWidth,height:window.innerHeight},a.targets=[],a.param=t||{},a.param)for(var n in a.default[i]=a.param[i],a.param[i])a.default[i][n]=a.param[i][n];null==a.default.scale&&(a.default.scale=a.default.height/a.default.sh,a.default.scale=e.getFloat(a.default.scale,4)),null==a.default.offx&&(a.default.offx=(a.default.sw-a.default.dw)/2),null==a.default.offy&&(a.default.offy=(a.default.sh-a.default.dh)/2);var o=a.default.target.slice(0,1);if("#"==o){console.log("使用 ID 选择器");var r=document.getElementById(a.default.target.slice(1))}else if("."==o){console.log("使用 类 选择器");r=document.getElementsByClassName(a.default.target.slice(1))}else{console.log("默认：使用类 选择器");r=document.getElementsByClassName(a.default.target)}var l={};1==a.default.scaleAutoWidth&&(l.offsetX=(a.default.width-a.default.dw*a.default.scale)/2,l.offsetX=e.getFloat(l.offsetX,4),l.safaX=(a.default.safeW-a.default.dw)/2*a.default.scale,l.safaX=e.getFloat(l.safaX,4),l.isX=l.offsetX<l.safaX,l.reScaleW=(l.offsetX-l.safaX)/a.default.width,l.reScaleW=e.getFloat(l.reScaleW,4),l.isX&&(a.default.scale+=l.reScaleW,a.default.scale=e.getFloat(a.default.scale,4),console.warn("根据宽度-缩放系数重新修订：",a.default.scale)));var s={};0==l.isX&&1==a.default.scaleAutoHeight&&(s.newHeight=parseFloat((a.default.dh*a.default.scale).toFixed(3)),s.offsetY=(a.default.height-a.default.dh*a.default.scale)/2,s.offsetY=e.getFloat(s.offsetY,4),s.safaY=(a.default.dh-a.default.safeH)/2*a.default.scale,s.safaY=e.getFloat(s.safaY,4),s.isY=s.offsetY<s.offsetY,s.reScaleH=(s.offsetY-s.safaY)/a.default.height,s.reScaleH=e.getFloat(s.reScaleH,4),s.isY&&(a.default.scale+=s.reScaleH,console.warn("根据高度-缩放系数重新修订：",a.default.scale))),a.autoScaleW=l,a.autoScaleH=s;for(var f=0;f<r.length;f++){var d=r[f],u=c(d);a.targets.push(u),d.style.width=u.newWidth+"px",d.style.height=u.newHeight+"px",d.style.position="absolute",d.style.marginLeft=u.marginLeft+"px",d.style.marginTop=u.marginTop+"px",a.default.change(u)}function c(e){var t={};if(t.target=e,t.Eheight=parseFloat(e.getAttribute("height")),t.Ewidth=parseFloat(e.getAttribute("width")),t.Eleft=parseFloat(e.getAttribute("left")),t.Etop=parseFloat(e.getAttribute("top")),t.scale=a.default.scale,t.newWidth=t.Ewidth*a.default.scale,t.newHeight=t.Eheight*a.default.scale,t.marginLeft=(a.default.width-a.default.sw*a.default.scale)/2+(t.Eleft+a.default.offx)*a.default.scale,t.marginTop=(a.default.height-a.default.sh*a.default.scale)/2+(t.Etop+a.default.offy)*a.default.scale,t.Etype=e.getAttribute("iforce-type"),null!=t.Etype&&""!=t.Etype){if(-1!=t.Etype.indexOf(" ")){var i=t.Etype.split(" ");t.Tx=null!=i[0]&&""!=i[0]?i[0]:null,t.Ty=null!=i[1]&&""!=i[1]?i[1]:null}else t.Tx=t.Etype,"center"==t.Etype?t.Ty="center":t.Ty="top";switch(t.Xaxis=parseInt(e.getAttribute("iforce-x")),t.Yaxis=parseInt(e.getAttribute("iforce-y")),t.Xaxis=isNaN(t.Xaxis)?0:t.Xaxis,t.Yaxis=isNaN(t.Yaxis)?0:t.Yaxis,t.Tx){case"left":t.marginLeft=t.Xaxis;break;case"center":t.marginLeft=(a.default.width-t.newWidth)/2+t.Xaxis;break;case"right":t.marginLeft=a.default.width-t.newWidth-t.Xaxis;break;default:t.marginLeft=t.Xaxis}switch(t.Ty){case"top":t.marginTop=t.Yaxis;break;case"center":t.marginTop=(a.default.height-t.newHeight)/2+t.Yaxis;break;case"bottom":t.marginTop=a.default.height-t.newHeight-t.Yaxis;break;default:t.marginTop=t.Yaxis}}return t}a.default.complete(a)},e.reSetV=function(t){var a={};for(var i in a.default={target:".csBox",dw:900,dh:1624,sw:750,sh:1200,safeW:750,safeH:1200,offx:null,offy:null,scaleAutoWidth:!0,scaleAutoHeight:!0,change:function(e){},complete:function(e){},scale:null,width:window.innerWidth,height:window.innerHeight},a.targets=[],a.param=t||{},a.param)for(var n in a.default[i]=a.param[i],a.param[i])a.default[i][n]=a.param[i][n];null==a.default.scale&&(a.default.scale=a.default.width/a.default.sh,a.default.scale=e.getFloat(a.default.scale,4)),console.log(a.default.scale),null==a.default.offy&&(a.default.offy=(a.default.sw-a.default.dw)/2),null==a.default.offx&&(a.default.offx=(a.default.sh-a.default.dh)/2);var o=a.default.target.slice(0,1);if("#"==o){console.log("使用 ID 选择器");var r=document.getElementById(a.default.target.slice(1))}else if("."==o){console.log("使用 类 选择器");r=document.getElementsByClassName(a.default.target.slice(1))}else{console.log("默认：使用类 选择器");r=document.getElementsByClassName(a.default.target)}var l={};1==a.default.scaleAutoHeight&&(l.offsetY=(a.default.height-a.default.dw*a.default.scale)/2,l.offsetY=e.getFloat(l.offsetY,4),l.safaY=(a.default.safeW-a.default.dw)/2*a.default.scale,l.safaY=e.getFloat(l.safaY,4),l.isY=l.offsetY<l.safaY,l.reScaleH=(l.offsetY-l.safaY)/a.default.height,l.reScaleH=e.getFloat(l.reScaleH,4),l.isY&&(a.default.scale+=l.reScaleH,a.default.scale=e.getFloat(a.default.scale,4),console.warn("横屏-根据高度-缩放系数重新修订：",a.default.scale)));var s={};0==s.isY&&1==a.default.scaleAutoWidth&&(s.newWidth=parseFloat((a.default.dw*a.default.scale).toFixed(3)),s.offsetX=(a.default.width-a.default.dh*a.default.scale)/2,s.offsetX=e.getFloat(s.offsetX,4),s.safaX=(a.default.dh-a.default.safeH)/2*a.default.scale,s.safaX=e.getFloat(s.safaX,4),s.isX=s.offsetX<s.offsetX,s.reScaleW=(s.offsetX-s.safaX)/a.default.width,s.reScaleW=e.getFloat(s.reScaleW,4),l.isY&&(a.default.scale+=s.reScaleW,console.warn("根据宽度-缩放系数重新修订：",a.default.scale))),a.autoScaleW=s,a.autoScaleH=l;for(var f=0;f<r.length;f++){var d=r[f],u=c(d);a.targets.push(u),d.style.width=u.newWidth+"px",d.style.height=u.newHeight+"px",d.style.position="absolute",d.style.marginLeft=u.marginLeft+"px",d.style.marginTop=u.marginTop+"px",d.style.transformOrigin="0px 0px 0px",d.style.transform="rotate(-90deg)",a.default.change(u)}function c(e){var t={};if(t.target=e,t.Eheight=parseFloat(e.getAttribute("height")),t.Ewidth=parseFloat(e.getAttribute("width")),t.Eleft=parseFloat(e.getAttribute("left")),t.Etop=parseFloat(e.getAttribute("top")),t.scale=a.default.scale,t.newWidth=t.Ewidth*a.default.scale,t.newHeight=t.Eheight*a.default.scale,t.marginTop=(a.default.height-a.default.sw*a.default.scale)/2+(t.Eleft+a.default.offy)*a.default.scale,t.marginTop=(t.marginTop+t.newHeight)/2,t.marginLeft=(a.default.width-a.default.sh*a.default.scale)/2+(t.Etop+a.default.offx)*a.default.scale,t.Etype=e.getAttribute("iforce-type"),null!=t.Etype&&""!=t.Etype){if(-1!=t.Etype.indexOf(" ")){var i=t.Etype.split(" ");t.Tx=null!=i[0]&&""!=i[0]?i[0]:null,t.Ty=null!=i[1]&&""!=i[1]?i[1]:null}else t.Tx=t.Etype,"center"==t.Etype?t.Ty="center":t.Ty="top";switch(t.Xaxis=parseInt(e.getAttribute("iforce-x")),t.Yaxis=parseInt(e.getAttribute("iforce-y")),t.Xaxis=isNaN(t.Xaxis)?0:t.Xaxis,t.Yaxis=isNaN(t.Yaxis)?0:t.Yaxis,t.Tx){case"left":t.marginLeft=t.Xaxis;break;case"center":t.marginLeft=(a.default.width-t.newWidth)/2+t.Xaxis;break;case"right":t.marginLeft=a.default.width-t.newWidth-t.Xaxis;break;default:t.marginLeft=t.Xaxis}switch(t.Ty){case"top":t.marginTop=t.Yaxis;break;case"center":t.marginTop=(a.default.height-t.newHeight)/2+t.Yaxis;break;case"bottom":t.marginTop=a.default.height-t.newHeight-t.Yaxis;break;default:t.marginTop=t.Yaxis}}return t}a.default.complete(a)},e.orientation=function(e){var t,a={},i="number"==typeof window.orientation&&"object"==typeof window.onorientationchange,n=document.body.parentNode,o=function(){if(i)switch(t=window.orientation){case 90:case-90:t="landscape";break;default:t="portrait"}else t=window.innerWidth>window.innerHeight?"landscape":"portrait";n.setAttribute("class",t),a.orientation=t,a.status="landscape"==t?0:1,a.msg="landscape"==t?"横":"竖",null!=e&&e(a)};i?window.addEventListener("orientationchange",o,!1):window.addEventListener("resize",o,!1),o()},e.getStrCenter=function(e,t,a){var i,n;return i=e.indexOf(t),n=e.indexOf(a),e.substring(i+1,n)},e.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},e.arrIndexOf=function(e,t){if(e&&e.indexOf)return e.indexOf(t);for(var a=e.length,i=0;i<a;i++)if(e[i]==t)return i;return-1},e.rand=function(e,t){var a=t-e,i=Math.random();return e+Math.round(i*a)},e.getNowFormatDate=function(e){var t=new Date,a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate();return i>=1&&i<=9&&(i="0"+i),n>=0&&n<=9&&(n="0"+n),1==e?a+"-"+i+"-"+n:2==e?t.getHours()+":"+t.getMinutes()+":"+t.getSeconds():a+"-"+i+"-"+n+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.isEmail=function(e){return!!/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(e)},e.isName=function(e){return""!=e||-1!=e.search(/^[\u0391-\uFFE5\w]+$/)},e.isPhone=function(e){return!!/^1[3456789]\d{9}$/.test(e)},e.browser=function(){var e=navigator.userAgent;navigator.appVersion;return{trident:e.indexOf("Trident")>-1,presto:e.indexOf("Presto")>-1,webKit:e.indexOf("AppleWebKit")>-1,gecko:e.indexOf("Gecko")>-1&&-1==e.indexOf("KHTML"),mobile:!!e.match(/AppleWebKit.*Mobile.*/),ios:!!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),iPhone:e.indexOf("iPhone")>-1,iPad:e.indexOf("iPad")>-1,webApp:-1==e.indexOf("Safari"),weixin:e.indexOf("MicroMessenger")>-1,qq:" qq"==e.match(/\sQQ/i),android:e.indexOf("Android")>-1||e.indexOf("Linux")>-1,txnews:e.indexOf("qqnews")>-1,sinawb:e.indexOf("weibo")>-1,mqq:e.indexOf("QQ")>-1}}(),e.isPC=function(){for(var e=navigator.userAgent,t=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),a=!0,i=0;i<t.length;i++)if(e.indexOf(t[i])>0){a=!1;break}return a}(),e.getALL=function(){querystr=window.location.href.split("?");var e=new Array;if(querystr[1]){var t=querystr[1].split("&");for(i=0;i<t.length;i++){var a=t[i].split("=");e[a[0]]=a[1]}}return e},e.getArg=function(e){for(var t=document.location.href,a=t.substring(t.indexOf("?")+1).split("&"),i=0;i<a.length;i++){if(-1!=a[i].indexOf(e+"="))return a[i].replace(e+"=","").replace("?","")}return""},e.setCookie=function(e,t){var a=new Date;a.setTime(a.getTime()+2592e6),document.cookie=e+"="+escape(t)+";expires="+a.toGMTString()},e.getCookie=function(e){var t,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(t=document.cookie.match(a))?unescape(t[2]):null},e.delCookie=function(t){var a=new Date;a.setTime(a.getTime()-1);var i=e.getCookie(t);null!=i&&(document.cookie=t+"="+i+";expires="+a.toGMTString())},e.fn.init.prototype=e.fn,console.log("msTools:"+e.version)}();