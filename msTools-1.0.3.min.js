/**
 * @author msxiehui <msxiehui@163.com> and Team
 * @author chenhongyu <chenghongyu>
 * form 北京耀启网络科技有限责任公司
 * form 北京百孚思传实网络营销机构
 *
 * 工具类，部分功能需要 jquery 或者 zepto
 *
 * Time: 2016/8/8
 * updateTime:2016-11-5 msxiehui; 
 *
 */

(function(){var c=window.ms=window.$$=function(b,a){return new c.fn.init(b,a)};c.version="1.0.3";c.fn=c.prototype={init:function(b){b&&(this.selector=b);return this}};c.jQueryOrZepto=function(){return window.jQuery||window.Zepto?!0:(console.error("\u6b64\u529f\u80fd\u9700\u8981 jQuery\u6216 Zepto \u652f\u6301"),!1)};c.height=window.innerHeight;c.width=window.innerWidth;c.log=new function(){this.ready=!1;this.id="msLog";this.content="msCon";this.tool="msTool";this.pos=1;var b=this;this.init=function(a){null==
a&&(a=$("body"));0<$("#msLog").length&&(this.id="ms_msLog");0<$("#msCon").length&&(this.content="ms_msCon");0<$("#msTool").length&&(this.tool="ms_msTool");a.prepend('<div id="'+this.id+'" style="width: 50%;height: 30%;position: absolute;z-index: 999999; background: rgba(0,0,0,0.3);;"><div id="'+this.content+'" style="padding: 6px;height: 80%;width: 90%;overflow: auto;position: relative;"></div><div id="'+this.tool+'" style="position: absolute;width: 100%;z-index: 999; bottom: 0;text-align: center"><input type="button" value="\u5207\u6362\u4f4d\u7f6e" id="log_postion" style="z-index: 9999999;margin-right: 5px"><input type="button" value="\u6e05\u7a7a" id="log_clear" style="z-index: 9999999;margin-right: 5px"><input type="button" value="\u5173\u95ed" id="log_close" style="z-index: 9999999;margin-right: 5px"> </div></div>');
this.ready=!0;this.position();$("#log_postion").on("touchstart mousedown",function(a){a.stopPropagation();b.pos=5>b.pos?b.pos+1:1;b.position(b.pos)});$("#log_clear").on("touchstart mousedown",function(a){a.stopPropagation();b.clear()});$("#log_close").on("touchstart mousedown",function(a){a.stopPropagation();b.close()});$("#"+this.content).on("touchstart",function(a){a.stopPropagation()});$("#"+this.content).on("touchmove",function(a){a.stopPropagation()})};this.position=function(a){if(0==this.ready)console.warn("\u8bf7\u521d\u59cb\u5316Log");
else{var b=$("#"+this.id);switch(a){case 2:b.css({left:"",right:"0px",top:"0px",bottom:"","margin-left":"","margin-top":""});this.pos=2;break;case 3:b.css({left:"50%",right:"",top:"50%",bottom:"","margin-left":"-25%","margin-top":"-25%"});this.pos=3;break;case 4:b.css({left:"0px",right:"",top:"",bottom:"10px","margin-left":"","margin-top":""});this.pos=4;break;case 5:b.css({left:"",right:"0px",top:"",bottom:"10px","margin-left":"","margin-top":""});this.pos=5;break;default:b.css({left:"0px",right:"",
top:"0px",bottom:"","margin-left":"","margin-top":""}),this.pos=1}}};this.log=function(a){""!=a&&($("#"+this.content).prepend("<pre style='color: #fff;white-space: pre-wrap;word-wrap: break-word;'>LOG:"+a+"</pre>"),console.log("msLog.log:"+a))};this.error=function(a){""!=a&&($("#"+this.content).prepend("<pre style='color: #ff0000;white-space: pre-wrap;word-wrap: break-word;'>ERROR:"+a+"</pre>"),console.error("msLog.error:"+a))};this.warn=function(a){""!=a&&($("#"+this.content).prepend("<pre style='color: #fff700;white-space: pre-wrap;word-wrap: break-word;'>WARN:"+
a+"</pre>"),console.warn("msLog.warn:"+a))};this.info=function(a){""!=a&&($("#"+this.content).prepend("<pre style='color: #54b8ff;white-space: pre-wrap;word-wrap: break-word;'>INFO:"+a+"</pre>"),console.info("msLog.info:"+a))};this.trace=function(a){""!=a&&($("#"+this.content).prepend("<pre style='color: #4bff50;white-space: pre-wrap;word-wrap: break-word;'>TRACE:"+a+"</pre>"),console.trace("msLog.trace:"+a))};this.clear=function(){$("#"+this.content).html("")};this.close=function(){$("#"+this.id).fadeOut(200)};
this.show=function(){$("#"+this.id).fadeIn(200)}};c.loadings=function(b,a,h){function c(a){f++;if(null!=h){var b={};b.total=e.length;b.id=a.target.imgid;b.currenter=f;b.bfb=parseInt(f/e.length*100);h(b)}}var e=[];Array.isArray(b)&&(e=b);if(a){a=document.getElementsByTagName("img");var g=a.length;for(b=0;b<g;b++)e.push(a[b].src)}for(b=0;b<e.length;b++)a=new Image,a.src=e[b],a.imgid=b,a.onload=c;var f=0};c.reSet=function(b,a,h,d){function e(a){this.target=a;this.Eheight=a.attr("height");this.Ewidth=
a.attr("width");this.scale=window.innerHeight/k;this.Eleft=a.attr("left");this.Etop=a.attr("top");this.newWidth=this.Ewidth*this.scale;this.newHeight=this.Eheight*this.scale;this.marginLeft=(window.innerWidth-f*this.scale)/2+this.Eleft*this.scale;this.marginTop=this.Etop*this.scale;var b=a.attr("cs-name");this.name=""!=b?b:a.attr("src");return this}if(c.jQueryOrZepto()){var g,f,k;g=b;f=h;k=d;if("undefined"==typeof g||""==g)g=".csBox";if("undefined"==typeof f||""==f||0>=f)f=750;if("undefined"==typeof k||
""==k||0>=k)k=1136;$(g).each(function(b){var c=e($(this));$(this).css({position:"absolute",width:c.newWidth,height:c.newHeight,"margin-left":c.marginLeft,"margin-top":c.marginTop});null!=a&&a(c,b,$(g).length)})}};c.getStrCenter=function(b,a,c){a=b.indexOf(a);c=b.indexOf(c);return b.substring(a+1,c)};c.isArray=function(b){return"[object Array]"===Object.prototype.toString.call(b)};c.arrIndexOf=function(b,a){if(b&&b.indexOf)return b.indexOf(a);for(var c=b.length,d=0;d<c;d++)if(b[d]==a)return d;return-1};
c.rand=function(b,a){return b+Math.round(Math.random()*(a-b))};c.getNowFormatDate=function(b){var a=new Date,c=a.getFullYear(),d=a.getMonth()+1,e=a.getDate();1<=d&&9>=d&&(d="0"+d);0<=e&&9>=e&&(e="0"+e);return 1==b?c+"-"+d+"-"+e:2==b?a.getHours()+":"+a.getMinutes()+":"+a.getSeconds():c+"-"+d+"-"+e+" "+a.getHours()+":"+a.getMinutes()+":"+a.getSeconds()};c.isEmail=function(b){return/^(\w-*\.*)+@(\w-?)+(\.\w{2,})+$/.test(b)?!0:!1};c.isName=function(b){return""!=b||-1!=b.search(/^[\u0391-\uFFE5\w]+$/)?
!0:!1};c.isPhone=function(b){return/^1[34578]\d{9}$/.test(b)?!0:!1};c.browser=function(){var b=navigator.userAgent;return{webKit:-1<b.indexOf("AppleWebKit"),ios:!!b.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:-1<b.indexOf("Android")||-1<b.indexOf("Linux"),weixin:-1<b.indexOf("MicroMessenger"),txnews:-1<b.indexOf("qqnews"),sinawb:-1<b.indexOf("weibo"),mqq:-1<b.indexOf("QQ")}}();c.isPC=function(){for(var b=navigator.userAgent,a="Android;iPhone;SymbianOS;Windows Phone;iPad;iPod".split(";"),c=!0,d=
0;d<a.length;d++)if(0<b.indexOf(a[d])){c=!1;break}return c}();c.getALL=function(){querystr=window.location.href.split("?");var b=[];if(querystr[1]){var a=querystr[1].split("&");for(i=0;i<a.length;i++){var c=a[i].split("=");b[c[0]]=c[1]}}return b};c.getArg=function(b){for(var a=document.location.href,a=a.substring(a.indexOf("?")+1).split("&"),c=0;c<a.length;c++)if(-1!=a[c].indexOf(b+"="))return a[c].replace(b+"=","").replace("?","");return""};c.setCookie=function(b,a){var c=new Date;c.setTime(c.getTime()+
2592E6);document.cookie=b+"="+escape(a)+";expires="+c.toGMTString()};c.getCookie=function(b){var a;return(a=document.cookie.match(new RegExp("(^| )"+b+"=([^;]*)(;|$)")))?unescape(a[2]):null};c.delCookie=function(b){var a=new Date;a.setTime(a.getTime()-1);var h=c.getCookie(b);null!=h&&(document.cookie=b+"="+h+";expires="+a.toGMTString())};c.fn.init.prototype=c.fn})();
